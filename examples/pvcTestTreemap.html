<!DOCTYPE html>
<html>
  <head>
    <title>CCC Samples - Treemap</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="../package-res/cdf/jquery.js"></script>
    
    <script type="text/javascript" src="../package-res/lib/protovis.js"></script>
    <script type="text/javascript" src="../package-res/lib/protovis-msie.js"></script>
    <script type="text/javascript" src="../package-res/lib/jquery.tipsy.js"></script>
    <script type="text/javascript" src="../package-res/lib/tipsy.js"></script>
    <link type="text/css" href="../package-res/lib/tipsy.css" rel="stylesheet"/>
    
    <script type="text/javascript" src="data/flare.js"></script>
    <script type="text/javascript" src="data/q01-01.js"></script>
    
    <script type="text/javascript" src="../package-res/def/def.js"></script>

    <!-- @SCRIPTSBEG@ -->
        <script type="text/javascript" src="../package-res/pvc/pvc.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvc.text.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvc.color.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvc.trends.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvc.options.js"></script>
        <script type="text/javascript" src="../package-res/pvc/format/numberFormatStyle.js"></script>
        <script type="text/javascript" src="../package-res/pvc/format/numberFormat.js"></script>
        <script type="text/javascript" src="../package-res/pvc/format/dateFormat.js"></script>
        <script type="text/javascript" src="../package-res/pvc/format/customFormat.js"></script>
        <script type="text/javascript" src="../package-res/pvc/format/formatProvider.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/_data.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/meta/DimensionType.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/meta/ComplexType.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/meta/ComplexTypeProject.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/TranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/MatrixTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/CrosstabTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/RelationalTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Atom.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Complex.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/ComplexView.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Datum.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Dimension.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Data.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Data.selected.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/GroupingSpec.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/DataOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/GroupingOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/LinearInterpolationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/LinearInterpolationOperSeriesState.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/ZeroInterpolationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/ZeroInterpolationOperSeriesState.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Data.operations.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/Data.compat.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Interactive.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Scene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Var.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Context.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Role.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/RoleVarHelper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/BasicSign.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Sign.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Panel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Label.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/ValueLabel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Dot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/DotSizeColor.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Line.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Area.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Bar.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/PieSlice.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/Rule.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/OptionsBase.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/MultiChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/SmallChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Axis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/CartesianAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/CartesianAxisRootScene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/CartesianAxisTickScene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/CartesianFocusWindow.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/ColorAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/SizeAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/NormalizedAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/Legend.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletRootScene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletGroupScene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletItemScene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletItemSceneSelection.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletItemSceneVisibility.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletItemRenderer.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/BulletItemDefaultRenderer.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/dataCell/DataCell.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/dataCell/ColorDataCell.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/Plot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/dataCell/CartesianOrthoDataCell.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/CartesianPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/CategoricalPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/BarPlotAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/BarPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/NormalizedBarPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/WaterfallPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/PointPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/MetricXYPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/MetricPointPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/PiePlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/HeatGridPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/BoxPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/BulletPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/TreemapPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/plot/SunburstPlot.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.visualRoles.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.data.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.plots.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.axes.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.panels.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.selection.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBaseChart.extension.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBasePanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcPlotPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcMultiChartPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcTitlePanelAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcTitlePanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcLegendPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcCartesianAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcGridDockingPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcCartesianGridDockingPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcCartesianAbstractPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcPlotBgPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcCategoricalAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcCategoricalAbstractPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcAxisPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcAxisTitlePanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcPiePanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcPieChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBarAbstractPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBarAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBarPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBarChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcNormalizedBarPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcNormalizedBarChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/legend/WaterfallBulletGroupScene.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcWaterfallPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcWaterfallChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcPointPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcPoint.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcHeatGridPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcHeatGridChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcMetricXYAbstract.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/MetricPointChartTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/MetricPointSizeAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcMetricPointPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcMetricPoint.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBulletChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcParallelCoordinates.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcDataTree.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/BoxplotChartTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBoxplotPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcBoxplotChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/TreemapDiscreteColorAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/TreemapChartTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcTreemapPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcTreemapChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/SunburstDiscreteColorAxis.js"></script>
        <script type="text/javascript" src="../package-res/pvc/data/translation/SunburstChartTranslationOper.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcSunburstPanel.js"></script>
        <script type="text/javascript" src="../package-res/pvc/pvcSunburstChart.js"></script>
        <script type="text/javascript" src="../package-res/pvc/visual/sign/SunburstSlice.js"></script>
    <!-- @SCRIPTSEND@ -->

    <link type="text/css" href="lib/codemirror/codemirror.css" rel="stylesheet"/>
    <script src="lib/codemirror/codemirror.js" type="text/javascript"></script>
    <script src="lib/codemirror/javascript.js" type="text/javascript"></script>
    
    <script type="text/javascript" src="pvcDocUtils.js"></script>
    <link type="text/css" href="pvcDocUtils.css" rel="stylesheet"/>
  </head>
  <body>

    <h1>Treemap Chart</h1>

<h2>Examples</h2>
<h3>A Single-Level Treemap</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="90" rows="15" id="pvcTreemap1Code">
new pvc.TreemapChart({
    canvas:     'pvcTreemap1',
    width:      400,
    height:     300,
    title:      "Single-Level Treemap",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    rootCategoryLabel: "World"
})
.setData(testTreemapSingleLevel, {crosstabMode: false})
.render();</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap1"></div>
</div>
</div>
</div>


<h3>A Three-Level Treemap</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="55" rows="15" id="pvcTreemap2Code">
/*
new pvc.TreemapChart({
    canvas:     'pvcTreemap2',
    width:      400,
    height:     300,
    title:      "Three-Level Treemap",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    rootCategoryLabel: "Earth"
})
.setData(testTreemapThreeLevel, {crosstabMode: false})
.render();
*/
new pvc.TreemapChart({
    canvas:     'pvcTreemap2',
    width:      400,
    height:     300,
    title:      "Three-Level Treemap",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    rootCategoryLabel: "",
    //legendSizeMax: '15%',
    legend: {
        scenes: {
            item: {
                labelText: function() {
                    var indent = "";
                    var group  = this.group;
                    if(group) {
                        var depth = group.depth;
                        // 0 ""
                        // 1 "text"
                        // 2 "└ text"
                        // 3 "  └ text"
                        switch(depth) {
                            case 0: return "";
                            case 1: break;
                            case 2: indent = "└ "; break;
                            default:
                                indent = new Array(2*(depth-2) + 1).join(" ") + "└ ";
                        }
                    }
                    return indent + this.base();
                }
            }
        }
    },
    extensionPoints: {
        //legendLabel_textAlign: 'right'
    }
})
.setData(testTreemapThreeLevel, {crosstabMode: false})
.render();
</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap2"></div>
</div>
</div>
</div>

<h3>Slice-and-dice Layout And Self-Colored</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="55" rows="15" id="pvcTreemap3Code">
new pvc.TreemapChart({
    canvas:     'pvcTreemap3',
    width:      400,
    height:     300,
    title:      "Slice-and-dice Layout",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    rootCategoryLabel: "Earth",
    valuesOptimizeLegibility: false,
    layoutMode: 'slice-and-dice',
    colorMode:  'bySelf'
})
.setData(testTreemapThreeLevel, {crosstabMode: false})
.render();</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap3"></div>
</div>
</div>
</div>

<h3>Small Multiple Treemaps</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="55" rows="15" id="pvcTreemap4Code">
new pvc.TreemapChart({
    canvas:     'pvcTreemap4',
    width:      600,
    height:     400,
    title:      "Small Multiple Treemaps",
    titleFont:  'italic 14px sans-serif',
    smallTitleFont:  'bold 14px sans-serif',
    colors:     pv.Colors.category19,
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    multiChartIndexes: 0,
    rootCategoryLabel: "flare",
    colorRole: "multiChart, category, category2, category3",
    legend: {
        scenes: {
            item: {
                labelText: function() {
                    var indent = "";
                    var group  = this.group;
                    if(group) {
                        var depth = group.depth;
                        // 0 ""
                        // 1 "text"
                        // 2 "└ text"
                        // 3 "  └ text"
                        switch(depth) {
                            case 0: return "";
                            case 1: break;
                            case 2: indent = "└ "; break;
                            default:
                                indent = new Array(2*(depth-2) + 1).join(" ") + "└ ";
                        }
                    }
                    return indent + this.base();
                }
            }
        }
    }
})
.setData(buildDataset(flare), {crosstabMode: false})
.render();</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap4"></div>
</div>
</div>
</div>

  </body>
</html>
